---
import Onboarding from "@/components/onboarding/Onboarding.astro";
import Start from "@/components/start/Start.astro";
import General from "@/layouts/General.astro";
import avatarList from "@/assets/avatars.json";
let [name, avatar] = ["", ""];

if (Astro.cookies.has("user")) {
	const cookie = Astro.cookies.get("user");
	const data = cookie?.value.split("|") || [];
	if (data.length === 2) {
		avatar = data[0];
		name = data[1];
	}
}
if (avatar) {
	avatar = avatarList.find((a) => a.value === avatar)?.icon || "";
}
---

<General mainClasses="flex flex-col items-center justify-center">
	{name ? <Start name={name} avatar={avatar} /> : <Onboarding />}
	<style is:global>
		svg #box {
			fill: #0071f7;
		}
		svg #names path {
			stroke: black;
		}
		html.dark svg #box {
			fill: white;
		}
		html.dark svg #names path {
			stroke: #66acff;
		}
	</style>
</General>
